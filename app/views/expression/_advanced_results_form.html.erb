<% form_tag expression_advanced_results_path, :method => :get do %>
  <div style="float:right;margin-bottom:0.5em">
    Search on definition and locus<br/>
    <%= text_field_tag "keywords",params[:keywords] %>
    <%= hidden_field_tag :assembly_id, params[:assembly_id] %>
    <%= hidden_field_tag :type_term_id, params[:type_term_id] %>
    <%= hidden_field_tag :c, params[:c] if params[:c]%>
    <%= hidden_field_tag :d, params[:d] if params[:d]%>
    <% @a_experiments.each do |e| %>
      <%= hidden_field_tag 'a_experiments[]', e.id %>
    <% end %>
    <% @b_experiments.each do |e| %>
      <%= hidden_field_tag 'b_experiments[]', e.id %>
    <% end %>
    <%= submit_tag 'Go', :class => 'button' %>
  </div>
  <div style="float:right;margin-right:2em">
    Definition Source<br/>
    <%= select_tag :definition_type, grouped_options_for_select(@group_select_options, params[:definition_type]) %>
  </div>
  <div style="float:right;margin-right:2em">
    Filter Favorites<br/>
    <%= select_tag :favorites_filter, options_for_select({'None' => 'n', 'My Favorites' => 'user', 'All Favorites' => 'all'}, params[:favorites_filter]) %>
  </div>

  <%= render :partial => 'item_bar_toggle' %>
  
  <!-- Advanced Options -->
  <div style="display:none;clear:both" id="advanced_search">
    
    <div style="float:right;margin-right:2em">
      Expression Type<br/>
      <%= select_tag :value_type, options_for_select(@value_options, params[:value_type])%>
    </div>
    
    <div style="float:right;margin-right:2em">
      Infinite Values<br/>
      <%= select_tag :infinite_order, options_for_select({'High' => 'f','Low' => 'l'}, params[:infinite_order]) %>
    </div>
    
    <div style="float:right;margin-right:2em">
      Show Empty Results<br/>
      <%= select_tag :show_blank, options_for_select({'Yes' => 'y','No' => 'n','Only Empty' => 'e'}, params[:show_blank])%>
    </div>
    
    <div style="clear:both;float:right;margin-right:2em;margin:1em">
      Definition Builder<br/>
      <%= select_tag :multi_definition_type, grouped_options_for_select(@group_select_options, params[:multi_definition_type]), {:multiple => true,:size => 5} %>
    </div>
    
    <div style="clear:both;float:right; margin-right:2em;margin:1em">
      <%= submit_tag 'Search', :class => "button" %>
    </div>
  </div>
  
<% end %>