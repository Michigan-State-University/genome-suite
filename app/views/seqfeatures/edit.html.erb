<% content_for :head do %>
	<%= render :partial => "common/extjs_css" %>
	<%= render :partial => "common/svjs_css" %>
	<%= stylesheet_link_tag 'formtastic', 'formtastic_overrides' %>
	<%= render :partial => "common/extjs" %>
	<%= render :partial => "common/svjs" %>
<% end %>

<%= content_for :sidebar do %>
	<%= render :partial => "genes/sidebar", :locals => {:active => 'features'} %>
<% end %>

<%= #TODO: Add tests for Edit seqfeature and GeneModel %>
<% if @seqfeature %>
	<% content_for :top_bar do %>
		<h1 class="pagetitle">
			<%= "#{@seqfeature.display_type} : #{@seqfeature.label_type} #{@seqfeature.label} #{(@seqfeature.gene.nil? ? "" : " - "+@seqfeature.gene.value)}" %>
			<div style="float:right;font-size:50%;padding-top:1em">
				<%= @seqfeature.bioentry.display_info %>
			</div>
		</h1>
	<% end %>

  <% content_for :item_bar do -%>
  	<div style="float:left">
  		<%= link_to "New Feature", new_seqfeature_path, :class => "button" %>
  		<%= link_to "Open Sequence Viewer", bioentry_path(@seqfeature.bioentry,{:pos => @seqfeature.min_start,:feature_id => @seqfeature.id,:tracks => [@seqfeature.bioentry.assembly.six_frame_track.id,@seqfeature.bioentry.assembly.generic_feature_tracks.first.id]}), :class => 'button' %>
  	</div>
  	<%= render :partial => 'format_links' %>
  <% end -%>

  <div style="float:left">
		With the editor you can manipulate all aspects of a feature. Below you will find a graphical representation and a form with several items. Changes will be recorded in the database after you submit the form. For more information please read the Edit section of the <%= link_to "Gene Details", details_seqfeatures_path %> page.
	</div>
	<!-- Graphic Gene-->

	<div class="clear">
		<div id="standard_format">
			<div class="border" style="overflow:hidden">
				<%= number_line(@view_start, @canvas_width, {:height => 40,:per_pixel => @gui_zoom}) %>
				<%= @gui_zoom.to_s+ ":1" %>
				<%= render :partial => 'graphic' %>
			</div>
		</div>
	</div>

  <p>
    A Feature can be any interesting region of sequence. Features have a 'Type' that denotes what kind of information you are attaching to the region and a number of attributes, called qualifiers, that are used to describe the feature.
  </p>
	<!-- Form -->
	<%= render :partial => 'form' %>
<% else %>
  <h1 class="pagetitle">Edit:  No Gene Found</h1>
<% end %>